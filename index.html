<!DOCTYPE html>
<!-- saved from url=(0132)blob:https://3qsww78rwgi513bw7n2gnsws4mlpzvuiots8v1lgg6z7twgzpp-h799512671.scf.usercontent.goog/b602e90a-9888-4136-a9b7-f3710d15c949 -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(firebaseConfig, initialAuthToken, appId) {
        window.__firebase_config = firebaseConfig;
        window.__initial_auth_token = initialAuthToken;
        window.__app_id = appId;
            })("\n{\n  \"apiKey\": \"AIzaSyCqyCcs2R2e7AegGjvFAwG98wlamtbHvZY\",\n  \"authDomain\": \"bard-frontend.firebaseapp.com\",\n  \"projectId\": \"bard-frontend\",\n  \"storageBucket\": \"bard-frontend.firebasestorage.app\",\n  \"messagingSenderId\": \"175205271074\",\n  \"appId\": \"1:175205271074:web:2b7bd4d34d33bf38e6ec7b\"\n}\n","eyJhbGciOiJSUzI1NiIsImtpZCI6ImExZWJmY2U1ZjYwZWY5Y2NkMGViNTc3ZmI3ZjkxZGRjODg1MDA0YzAiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BiYXJkLWZyb250ZW5kLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiIxNTM4MDgxNTc2MDc1ODA4ODYyNSIsImlzcyI6ImZpcmViYXNlLWFkbWluc2RrLWZic3ZjQGJhcmQtZnJvbnRlbmQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJjbGFpbXMiOnsiYXBwSWQiOiI0ZDkwY2NlNjUzZDEtYWlfZXZhbF93b3JrYmVuY2hfZmlyZXN0b3JlLmh0bWwtMzg4In0sImV4cCI6MTc1NjcxODExNCwiaWF0IjoxNzU2NzE0NTE0LCJhbGciOiJSUzI1NiJ9.FGqdYwx-29m8IUvYMCxUH9NwlZffCoVU57sdJ3OrxfJFD6InePoVMzTrZRlXhlDL65nHlfeFQqpySlrdQUB-8d3RtUMrnRe7qLCJ9MtGxwq_jszGV3rFV1PVnvuUBbNI2zTEmtg6BxXT9uWT7d9nLkwHMgBE4JTGVXQ25mnnHITgE97p3O3071C5FVJmpsFddZIDiFfnZuyVEArD5mY3IN2ac3pHZGJOVk-tFH3eORjN2YydNQJ3BKxMBZlp46JwPU3oe4SnR__YQH4gi4eFlcLiDPiJyf0jkWGNSjG3AbWhwy5dzmGvH7Gi5Zgt8qvYcx7suJoCjwGZYZnafXdqYg","4d90cce653d1-ai_eval_workbench_firestore.html-388")</script><script>'use strict';var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};function l(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var n=l(this);
function q(a,b){if(b)a:{var d=n;a=a.split(".");for(var c=0;c<a.length-1;c++){var f=a[c];if(!(f in d))break a;d=d[f]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&b!=null&&h(d,a,{configurable:!0,writable:!0,value:b})}}function r(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,f){function e(g){g.done?c(g.value):Promise.resolve(g.value).then(b,d).then(e,f)}e(a.next())})}function t(a){return r(a())}
q("Object.values",function(a){return a?a:function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(b[c]);return d}});q("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var f=c.length;d=d||0;for(d<0&&(d=Math.max(d+f,0));d<f;d++){var e=c[d];if(e===b||Object.is(e,b))return!0}return!1}});/*

 MIT License

 Copyright (c) 2017-2023 W.Y.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

*/
function u(a,b){const d=a.style;b.backgroundColor&&(d.backgroundColor=b.backgroundColor);b.width&&(d.width=`${b.width}px`);b.height&&(d.height=`${b.height}px`);const c=b.style;c!=null&&Object.keys(c).forEach(f=>{d[f]=c[f]})};var v=(()=>{let a=0;return()=>{a+=1;return`u${`0000${(Math.random()*1679616<<0).toString(36)}`.slice(-4)}${a}`}})();function w(a){const b=[];for(let d=0,c=a.length;d<c;d++)b.push(a[d]);return b}function x(a,b){return(a=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b))?parseFloat(a.replace("px","")):0}
function y(a,b={}){var d;if(!(d=b.width)){d=x(a,"border-left-width");var c=x(a,"border-right-width");d=a.clientWidth+d+c}(b=b.height)||(b=x(a,"border-top-width"),c=x(a,"border-bottom-width"),b=a.clientHeight+b+c);return{width:d,height:b}}function z(a){return new Promise((b,d)=>{const c=new Image;c.onload=()=>{c.decode().then(()=>{requestAnimationFrame(()=>b(c))})};c.onerror=d;c.crossOrigin="anonymous";c.decoding="async";c.src=a})}
function A(a){return t(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(a)).then(encodeURIComponent).then(b=>`data:image/svg+xml;charset=utf-8,${b}`)})}
function B(a,b,d){return t(function*(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),f=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");c.setAttribute("width",`${b}`);c.setAttribute("height",`${d}`);c.setAttribute("viewBox",`0 0 ${b} ${d}`);f.setAttribute("width","100%");f.setAttribute("height","100%");f.setAttribute("x","0");f.setAttribute("y","0");f.setAttribute("externalResourcesRequired","true");c.appendChild(f);f.appendChild(a);return A(c)})}
var C=(a,b)=>{if(a instanceof b)return!0;a=Object.getPrototypeOf(a);return a===null?!1:a.constructor.name===b.name||C(a,b)};function D(a){return w(a).map(b=>{const d=a.getPropertyValue(b),c=a.getPropertyPriority(b);return`${b}: ${d}${c?" !important":""};`}).join(" ")}
function E(a,b,d){a=window.getComputedStyle(a,d);var c=a.getPropertyValue("content");if(c!==""&&c!=="none"){var f=v();try{b.className=`${b.className} ${f}`}catch(g){return}c=document.createElement("style");var e=c.appendChild;d=`.${f}:${d}`;a.cssText?(f=a.getPropertyValue("content"),a=`${a.cssText} content: '${f.replace(/'|"/g,"")}';`):a=D(a);e.call(c,document.createTextNode(`${d}{${a}}`));b.appendChild(c)}};function F(a){return a.search(/^(data:)/)!==-1}function G(a,b,d){return t(function*(){const c=yield fetch(a,b);if(c.status===404)throw Error(`Resource "${c.url}" not found`);const f=yield c.blob();return new Promise((e,g)=>{const k=new FileReader;k.onerror=g;k.onloadend=()=>{try{e(d({l:c,result:k.result}))}catch(m){g(m)}};k.readAsDataURL(f)})})}const H={};function I(a,b,d){let c=a.replace(/\?.*/,"");d&&(c=a);/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,""));return b?`[${b}]${c}`:c}
function J(a,b,d){return t(function*(){const c=I(a,b,d.A);if(H[c]!=null)return H[c];d.m&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());let f;try{const e=yield G(a,d.i,({l:g,result:k})=>{b||(b=g.headers.get("Content-Type")||"");return k.split(/,/)[1]});f=`data:${b};base64,${e}`}catch(e){f=d.v||""}return H[c]=f})};const K={N:"application/font-woff",O:"application/font-woff",L:"application/font-truetype",o:"application/vnd.ms-fontobject",F:"image/png",C:"image/jpeg",B:"image/jpeg",u:"image/gif",K:"image/tiff",J:"image/svg+xml",M:"image/webp"};function L(a){return(a=/\.([^./]*?)$/g.exec(a))?a[1]:""};function M(a){return t(function*(){const b=a.toDataURL();return b==="data:,"?a.cloneNode(!1):z(b)})}function N(a,b){return t(function*(){if(a.currentSrc){var d=document.createElement("canvas");const c=d.getContext("2d");d.width=a.clientWidth;d.height=a.clientHeight;c==null||c.drawImage(a,0,0,d.width,d.height);d=d.toDataURL();return z(d)}d=a.poster;d=yield J(d,K[L(d).toLowerCase()]||"",b);return z(d)})}
function O(a){return t(function*(){try{let b;if(a==null?0:(b=a.contentDocument)==null?0:b.body)return yield P(a.contentDocument.body,{},!0)}catch(b){}return a.cloneNode(!1)})}function aa(a,b){return t(function*(){return C(a,HTMLCanvasElement)?M(a):C(a,HTMLVideoElement)?N(a,b):C(a,HTMLIFrameElement)?O(a):a.cloneNode(!1)})}
function ba(a,b,d){return t(function*(){let c=[];if(a.tagName!=null&&a.tagName.toUpperCase()==="SLOT"&&a.assignedNodes)c=w(a.assignedNodes());else{let f;if(C(a,HTMLIFrameElement)&&((f=a.contentDocument)==null?0:f.body))c=w(a.contentDocument.body.childNodes);else{let e;c=w(((e=a.shadowRoot)!=null?e:a).childNodes)}}if(c.length===0||C(a,HTMLVideoElement))return b;yield c.reduce((f,e)=>f.then(()=>P(e,d)).then(g=>{g&&b.appendChild(g)}),Promise.resolve());return b})}
function ca(a,b){const d=b.style;if(d){var c=window.getComputedStyle(a);c.cssText?(d.style.cssText=c.cssText,d.transformOrigin=c.transformOrigin):w(c).forEach(f=>{let e=c.getPropertyValue(f);f==="font-size"&&e.endsWith("px")&&(e=`${Math.floor(parseFloat(e.substring(0,e.length-2)))-.1}px`);C(a,HTMLIFrameElement)&&f==="display"&&e==="inline"&&(e="block");f==="d"&&b.getAttribute("d")&&(e=`path(${b.getAttribute("d")})`);d.setProperty(f,e,c.getPropertyPriority(f))})}}
function da(a,b){C(a,HTMLSelectElement)&&(b=Array.from(b.children).find(d=>a.value===d.getAttribute("value")))&&b.setAttribute("selected","")}
function ea(a,b){return t(function*(){var d=a.querySelectorAll?a.querySelectorAll("use"):[];if(d.length===0)return a;var c={};for(var f=0;f<d.length;f++){var e=d[f].getAttribute("xlink:href");if(e){const g=document.querySelector(e);a.querySelector(e)||!g||c[e]||(c[e]=yield P(g,b,!0))}}d=Object.values(c);if(d.length){c=document.createElementNS("http://www.w3.org/1999/xhtml","svg");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");c.style.position="absolute";c.style.width="0";c.style.height="0";
c.style.overflow="hidden";c.style.display="none";f=document.createElementNS("http://www.w3.org/1999/xhtml","defs");c.appendChild(f);for(e=0;e<d.length;e++)f.appendChild(d[e]);a.appendChild(c)}return a})}
function P(a,b,d){return t(function*(){return d||!b.filter||b.filter(a)?Promise.resolve(a).then(c=>aa(c,b)).then(c=>ba(a,c,b)).then(c=>{C(c,Element)&&(ca(a,c),E(a,c,":before"),E(a,c,":after"),C(a,HTMLTextAreaElement)&&(c.textContent=a.value),C(a,HTMLInputElement)&&c.setAttribute("value",a.value),da(a,c));return c}).then(c=>ea(c,b)):null})};const Q=/url\((['"]?)([^'"]+?)\1\)/g,fa=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ha=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ia(a){const b=[];a.replace(Q,(d,c,f)=>{b.push(f);return d});return b.filter(d=>!F(d))}
function ja(a,b,d,c){return t(function*(){try{const f=d?(new URL(b,d||void 0)).toString():b;let e;e=yield J(f,K[L(b).toLowerCase()]||"",c);return a.replace(new RegExp(`(url\\(['"]?)(${b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")})(['"]?\\))`,"g"),`$1${e}$3`)}catch(f){}return a})}function ka(a,{G:b}){return b?a.replace(ha,d=>{for(;;){const [c,,f]=fa.exec(d)||[],e=c,g=f;if(!g)return"";if(g===b)return`src: ${e};`}}):a}
function R(a,b,d){return t(function*(){if(a.search(Q)===-1)return a;const c=ka(a,d);return ia(c).reduce((f,e)=>f.then(g=>ja(g,e,b,d)),Promise.resolve(c))})};function S(a,b,d){return t(function*(){var c;const f=(c=b.style)==null?void 0:c.getPropertyValue(a);return f?(c=yield R(f,null,d),b.style.setProperty(a,c,b.style.getPropertyPriority(a)),!0):!1})}function la(a,b){return t(function*(){(yield S("background",a,b))||(yield S("background-image",a,b));(yield S("mask",a,b))||(yield S("mask-image",a,b))})}
function ma(a,b){return t(function*(){const d=C(a,HTMLImageElement);if(d&&!F(a.src)||C(a,SVGImageElement)&&!F(a.href.baseVal)){var c=d?a.src:a.href.baseVal,f=yield J(c,K[L(c).toLowerCase()]||"",b);yield new Promise((e,g)=>{a.onload=e;a.onerror=g;a.decode&&(a.onload=()=>{a.decode().then(()=>{requestAnimationFrame(e)})},a.decoding="sync");a.loading==="lazy"&&(a.loading="eager");d?(a.srcset="",a.src=f):a.href.baseVal=f})}})}
function na(a,b){return t(function*(){const d=w(a.childNodes).map(c=>T(c,b));yield Promise.all(d).then(()=>a)})}function T(a,b){return t(function*(){C(a,Element)&&(yield la(a,b),yield ma(a,b),yield na(a,b))})};const U={};function V(a){return t(function*(){var b=U[a];if(b!=null)return b;b=yield(yield fetch(a)).text();b={url:a,cssText:b};return U[a]=b})}function W(a,b){return t(function*(){let d=a.cssText;const c=/url\(["']?([^"')]+)["']?\)/g,f=(d.match(/url\([^)]+\)/g)||[]).map(e=>t(function*(){let g=e.replace(c,"$1");g.startsWith("https://")||(g=(new URL(g,a.url)).href);return G(g,b.i,({result:k})=>{d=d.replace(e,`url(${k})`);return[e,k]})}));return Promise.all(f).then(()=>d)})}
function X(a){if(a==null)return[];const b=[];a=a.replace(/(\/\*[\s\S]*?\*\/)/gi,"");for(var d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var c=d.exec(a);if(c===null)break;b.push(c[0])}a=a.replace(d,"");d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;for(c=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){let f=d.exec(a);if(f===null)if(f=c.exec(a),f===null)break;else d.lastIndex=c.lastIndex;else c.lastIndex=
d.lastIndex;b.push(f[0])}return b}
function oa(a,b){return t(function*(){const d=[],c=[];a.forEach(f=>{if("cssRules"in f)try{w(f.cssRules||[]).forEach((e,g)=>{if(e.type===CSSRule.IMPORT_RULE){let k=g+1;e=V(e.href).then(m=>W(m,b)).then(m=>X(m).forEach(p=>{try{f.insertRule(p,p.startsWith("@import")?k+=1:f.cssRules.length)}catch(za){}})).catch(()=>{});c.push(e)}})}catch(e){const g=a.find(k=>k.href==null)||document.styleSheets[0];f.href!=null&&c.push(V(f.href).then(k=>W(k,b)).then(k=>X(k).forEach(m=>{g.insertRule(m,f.cssRules.length)})).catch(()=>
{}))}});return Promise.all(c).then(()=>{a.forEach(f=>{if("cssRules"in f)try{w(f.cssRules||[]).forEach(e=>{d.push(e)})}catch(e){}});return d})})}function pa(a){return a.filter(b=>b.type===CSSRule.FONT_FACE_RULE).filter(b=>b.style.getPropertyValue("src").search(Q)!==-1)}function qa(a,b){return t(function*(){if(a.ownerDocument==null)throw Error("Provided element is not within a Document");var d=w(a.ownerDocument.styleSheets);d=yield oa(d,b);return pa(d)})}
function ra(a,b){return t(function*(){const d=yield qa(a,b);return(yield Promise.all(d.map(c=>R(c.cssText,c.parentStyleSheet?c.parentStyleSheet.href:null,b)))).join("\n")})}function sa(a,b){return t(function*(){const d=b.j!=null?b.j:b.I?null:yield ra(a,b);if(d){const c=document.createElement("style");c.appendChild(document.createTextNode(d));a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}})};function ta(a,b={}){return t(function*(){const {width:d,height:c}=y(a,b),f=yield P(a,b,!0);yield sa(f,b);yield T(f,b);u(f,b);return yield B(f,d,c)})}
function ua(a,b={}){return t(function*(){const {width:d,height:c}=y(a,b);var f=yield ta(a,b);f=yield z(f);const e=document.createElement("canvas"),g=e.getContext("2d"),k=b.D||window.devicePixelRatio||1,m=b.h||d,p=b.g||c;e.width=m*k;e.height=p*k;!b.H&&(e.width>16384||e.height>16384)&&(e.width>16384&&e.height>16384?e.width>e.height?(e.height*=16384/e.width,e.width=16384):(e.width*=16384/e.height,e.height=16384):e.width>16384?(e.height*=16384/e.width,e.width=16384):(e.width*=16384/e.height,e.height=
16384));e.style.width=`${m}`;e.style.height=`${p}`;b.backgroundColor&&(g.fillStyle=b.backgroundColor,g.fillRect(0,0,e.width,e.height));g.drawImage(f,0,0,e.width,e.height);return e})}function Y(a,b={}){return t(function*(){return(yield ua(a,b)).toDataURL()})};const va=["gemini.google.com","corp.google.com"];function Z(){return document.body.querySelectorAll('[class*="animate"]').length>0}function wa(){return t(function*(){const a=document.body.offsetWidth,b=document.body.offsetHeight,d=document.body.cloneNode(!0);d.querySelectorAll('[class*="animate"]').forEach(c=>{c.classList.remove(...Array.from(c.classList).filter(f=>f.startsWith("animate")))});d.style.width=`${a}px`;d.style.height=`${b}px`;return d})}
function xa(a){return t(function*(){let b=document.body;if(Z()){var d=yield wa();b=d;document.body.appendChild(d)}d=yield Y(b,{h:b.offsetWidth,g:b.offsetHeight});Z()&&document.body.removeChild(b);window.parent.postMessage({type:"SEND_SCREENSHOT",image:d,topOffset:document.documentElement.scrollTop},a.origin)})}
function ya(a){return t(function*(){var b=document.body;b={type:"SEND_SCREENSHOT_FOR_DATA_VISUALIZATION",image:yield Y(b,{h:b.offsetWidth,g:b.offsetHeight}),topOffset:0};window.parent.postMessage(b,a.origin)})}window.addEventListener("message",a=>t(function*(){if(va.some(d=>a.origin.includes(d))){var b=a.data;b&&(b.type==="MAKE_SCREENSHOT"&&(yield xa(a)),b.type==="MAKE_SCREENSHOT_FOR_DATA_VISUALIZATION"&&(yield ya(a)))}}));
</script><script>(function() {
  // Ensure this script is executed only once
  if (window.firebaseAuthBridgeScriptLoaded) {
    return;
  }
  window.firebaseAuthBridgeScriptLoaded = true;

  let nextTokenPromiseId = 0;

  // Stores { resolve, reject } for ongoing token requests
  const pendingTokenPromises = {};

  // Listen for messages from the Host Application
  window.addEventListener('message', function(event) {

    const messageData = event.data;

  if (messageData && messageData.type === 'RESOLVE_NEW_FIREBASE_TOKEN') {
      const { success, token, error, promiseId } = messageData ?? {};
      if (pendingTokenPromises[promiseId]) {
        if (success) {
          pendingTokenPromises[promiseId].resolve(token);
        } else {
          pendingTokenPromises[promiseId].reject(new Error(error || 'Token refresh failed from host.'));
        }
        delete pendingTokenPromises[promiseId];
      }
    }
  });

  // Expose a function for the Generated App to request a new Firebase token
  window.requestNewFirebaseToken = function() {
    const currentPromiseId = nextTokenPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingTokenPromises[currentPromiseId] = { resolve, reject };
    });
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({
        type: 'REQUEST_NEW_FIREBASE_TOKEN',
        promiseId: currentPromiseId
      }, '*');
    } else {
      pendingTokenPromises[currentPromiseId].reject(new Error('No parent window to request token from.'));
      delete pendingTokenPromises[currentPromiseId];
    }
    return promise;
  };
})();</script><script>
let realOriginalGetUserMedia = null;
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  realOriginalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
}

(function() {
  if (navigator.mediaDevices && navigator.mediaDevices.__proto__) {
    try {
      Object.defineProperty(navigator.mediaDevices.__proto__, 'getUserMedia', {
        get: function() {
          return undefined; // Or throw an error
        },
        configurable: false
      });
    } catch (error) {
      console.error("Error defining prototype getter:", error);
    }
  }
})();

(function() {
  const pendingMediaResolvers = {};
  let nextMediaPromiseId = 0;

  function requestMediaPermissions(constraints) {
    const mediaPromiseId = nextMediaPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingMediaResolvers[mediaPromiseId] = (granted) => {
        delete pendingMediaResolvers[mediaPromiseId];
        resolve(granted);
      };
    });

    window.parent.postMessage({
      type: 'requestMediaPermission',
      constraints: constraints,
      promiseId: mediaPromiseId,
    }, '*');

    return promise;
  }

  let originalGetUserMedia = realOriginalGetUserMedia;

  function interceptGetUserMedia() {
    if (navigator.mediaDevices) {
      Object.defineProperty(navigator.mediaDevices, 'getUserMedia', {
        value: function(constraints) {
          return requestMediaPermissions(constraints).then((granted) => {
            if (granted) {
              if (originalGetUserMedia) {
                return originalGetUserMedia(constraints);
              } else {
                throw new Error("Original getUserMedia not available.");
              }
            } else {
              throw new DOMException('Permission denied', 'NotAllowedError');
            }
          });
        },
        writable: false,
        configurable: false
      });
    }
  }

  interceptGetUserMedia();

  const observer = new MutationObserver(function(mutationsList, observer) {
    for (const mutation of mutationsList) {
      if (mutation.type === 'reconfigured' && mutation.name === 'getUserMedia' && mutation.object === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'attributes' && mutation.attributeName === 'getUserMedia' && mutation.target === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'childList' && mutation.addedNodes) {
        mutation.addedNodes.forEach(node => {
          if (node === navigator.mediaDevices) {
            interceptGetUserMedia();
          }
        });
      }
    }
  });

  function interceptSpeechRecognition() {
    if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
      return;
    }

    const OriginalSpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    const SpeechRecognitionWrapper = function(...args) {
      const recognizer = new OriginalSpeechRecognition(...args);
      const originalStart = recognizer.start.bind(recognizer);

      recognizer.start = function() {
        requestMediaPermissions({ audio: true }).then(granted => {
          if (granted) {
            originalStart();
          } else {
            const errorEvent = new SpeechRecognitionErrorEvent('error');
            errorEvent.error = 'not-allowed'; // This is the standard error for permission denial.
            recognizer.dispatchEvent(errorEvent);
          }
        });
      };

      return recognizer;
    };

    SpeechRecognitionWrapper.prototype = OriginalSpeechRecognition.prototype;
    SpeechRecognitionWrapper.prototype.constructor = SpeechRecognitionWrapper;

    if (window.SpeechRecognition) {
      window.SpeechRecognition = SpeechRecognitionWrapper;
    }
    if (window.webkitSpeechRecognition) {
      window.webkitSpeechRecognition = SpeechRecognitionWrapper;
    }
  }

  interceptSpeechRecognition();

  window.addEventListener('message', function(event) {
    if (event.data) {
      if (event.data.type === 'resolveMediaPermission') {
        const { promiseId, granted } = event.data;
        if (pendingMediaResolvers[promiseId]) {
          pendingMediaResolvers[promiseId](granted);
        }
      }
    }
  });

})();</script><script>((function(modelInformation) {
  const originalFetch = window.fetch;
  // TODO: b/421908508 - Move these out of the script and match all generative AI model calls.
  let googleLlmBaseApiUrls = [
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':streamGenerateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageEditModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.ttsModelName + ':generateContent',
  ];
  modelInformation.deprecatedTextModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':streamGenerateContent',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':generateContent',
    );
  });

  const pendingFetchResolvers = {};
  let nextPromiseId = 0;

  function handleStringInput(input, optionsArgument) {
    const actualUrl = input;
    const fetchCallArgs = [actualUrl, optionsArgument];
    const effectiveOptions = optionsArgument || {};
    const bodyForApiKeyCheck = effectiveOptions.body;
    const bodyForPostMessage = effectiveOptions.body;
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  function handleRequestInput(input, optionsArgument) {
    const actualUrl = input.url;
    const fetchCallArgs = [input, optionsArgument];
    const effectiveOptions = { method: input.method, headers: new Headers(input.headers) };
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (optionsArgument) {
      if (optionsArgument.method) effectiveOptions.method = optionsArgument.method;
      if (optionsArgument.headers) effectiveOptions.headers = new Headers(optionsArgument.headers);
      if ('body' in optionsArgument) {
        bodyForApiKeyCheck = optionsArgument.body;
        bodyForPostMessage = optionsArgument.body;
      } else {
        bodyForApiKeyCheck = undefined;
        bodyForPostMessage = input.body;
      }
    } else {
      bodyForApiKeyCheck = undefined;
      bodyForPostMessage = input.body;
    }
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  window.fetch = function(input, optionsArgument) {
    let actualUrl;
    let fetchCallArgs;
    let effectiveOptions = {};
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (typeof input === 'string') {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleStringInput(input, optionsArgument));
    } else if (input instanceof Request) {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleRequestInput(input, optionsArgument));
    } else {
      return originalFetch.apply(window, [input, optionsArgument]);
    }

    effectiveOptions.method = effectiveOptions.method || 'GET';
    if (!effectiveOptions.headers) {
      effectiveOptions.headers = new Headers();
    }


    if (typeof actualUrl === 'string' && googleLlmBaseApiUrls.some((url) => actualUrl.startsWith(url))) {
      let apiKeyIsNull = true;

      const regex = new RegExp("models/([^:]+)");
      const modelNameMatch = actualUrl.match(regex);
      const modelName = modelNameMatch ? modelNameMatch[1] : 'unspecified';


      try {
        const urlObject = new URL(actualUrl);  // Use URL object for robust parsing
        const apiKeyParam = urlObject.searchParams.get('key');
        if (apiKeyParam) {
          apiKeyIsNull = false;
        }
      } catch (e) {
        // Continue checks even if URL parsing fails
      }

      if (apiKeyIsNull && effectiveOptions.headers) {
        const h = new Headers(effectiveOptions.headers);
        const apiKeyHeaderValue = h.get('X-API-Key') || h.get('x-api-key');
        if (apiKeyHeaderValue) {
          apiKeyIsNull = false;
          return originalFetch.apply(window, fetchCallArgs);
        }
      }

      if (apiKeyIsNull && effectiveOptions.method && ['POST', 'PUT', 'PATCH'].includes(effectiveOptions.method.toUpperCase()) && typeof bodyForApiKeyCheck === 'string') {
        try {
          const bodyData = JSON.parse(bodyForApiKeyCheck);
          if (bodyData && bodyData.apiKey) {
            apiKeyIsNull = false;
            return originalFetch.apply(window, fetchCallArgs);
          }
        } catch (e) {
          // Ignore JSON parsing errors
        }
      }

      if(apiKeyIsNull) {
        const promiseId = nextPromiseId++;
        const promise = new Promise((resolve) => {
          pendingFetchResolvers[promiseId] = (resolvedResponse) => {
            delete pendingFetchResolvers[promiseId];
            resolve(resolvedResponse);
          };
        });

        let serializedBodyForPostMessage;
        if (typeof bodyForPostMessage === 'string' || bodyForPostMessage == null) {
            serializedBodyForPostMessage = bodyForPostMessage;
        } else if (bodyForPostMessage instanceof ReadableStream) {
            serializedBodyForPostMessage = null;
        } else {
            try {
                serializedBodyForPostMessage = JSON.stringify(bodyForPostMessage);
            } catch (e) {
                serializedBodyForPostMessage = null;
            }
        }

        const messageOptions = {
            method: effectiveOptions.method,
            headers: Object.fromEntries(new Headers(effectiveOptions.headers).entries()),
            body: serializedBodyForPostMessage
        };

        window.parent.postMessage({
          type: 'requestFetch',
          url: actualUrl,
          modelName: modelName,
          options: messageOptions,
          promiseId: promiseId,
        }, '*');

        return promise;
      }
      return originalFetch.apply(window, fetchCallArgs);
    }
    return originalFetch.apply(window, fetchCallArgs);
  };

  window.addEventListener('message', function(event) {
    if (event.data && event.data.type === 'resolveFetch') {
      const { promiseId, response } = event.data;
      if (pendingFetchResolvers[promiseId]) {
        try {
          const reconstructedResponse = new Response(response.body, {
            status: response.status,
            statusText: response.statusText,
            headers: new Headers(response.headers),
          });
          pendingFetchResolvers[promiseId](reconstructedResponse);
        } catch (error) {
          pendingFetchResolvers[promiseId](new Response(null, { status: 500, statusText: "Interceptor Response Reconstruction Error" }));
        }
      }
    }
  });

}))({"textModelName":"gemini-2.5-flash-preview-05-20","imageModelName":"imagen-3.0-generate-002","imageEditModelName":"gemini-2.5-flash-image-preview","videoModelName":"veo-2.0-generate-001","ttsModelName":"gemini-2.5-flash-preview-tts","deprecatedTextModelNames":["gemini-2.0-flash","gemini-2.5-flash-preview-04-17"]})</script><script>(function() {
  const originalConsoleLog = console.log;
  const originalConsoleError = console.error;

    /**
   * Normalizes an error event or a promise rejection reason into a structured error object.
   * @param {*} errorEventOrReason The error object or reason.
   * @return {object} Structured error data { message, name, stack }.
   */
  function getErrorObject(errorEventOrReason) {
    if (errorEventOrReason instanceof Error) {
      return {
        message: errorEventOrReason.message,
        name: errorEventOrReason.name,
        stack: errorEventOrReason.stack,
      };
    }
    // Fallback for non-Error objects.
    try {
      return {
        message: JSON.stringify(errorEventOrReason),
        name: 'UnknownErrorType',
        stack: null,
      };
    } catch (e) {
      return {
        message: String(errorEventOrReason),
        name: 'UnknownErrorTypeNonStringifiable',
        stack: null,
      };
    }
  }

  /**
   * Converts an array of arguments (from log/error) into a single string.
   * Handles Error objects specially to include their message and stack.
   * @param {Array<*>} args - Arguments passed to console methods.
   * @return {string} A string representation of the arguments.
   */
  function stringifyArgs(args) {
    return args
      .map((arg) => {
        if (arg instanceof Error) {
          const {message, stack} = arg;
          return `Error: ${message}${stack ? ('\nStack: ' + stack) : ''}`;
        }
        if (typeof arg === 'object' && arg !== null) {
          try {
            return JSON.stringify(arg);
          } catch (error) {
            return '[Circular Object]';
          }
        } else {
          return String(arg);
        }
      })
      .join(' ');
  }

  console.log = function(...args) {
    const logString = stringifyArgs(args);
    window.parent.postMessage({ type: 'log', message: logString }, '*');
    originalConsoleLog.apply(console, args);
  };

  console.error = function(...args) {
    let errorData;
    if (args.length > 0 && args[0] instanceof Error) {
      const err = args[0];
      // If the first arg is an Error, capture its details.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        ...getErrorObject(err),
        rawArgsString: stringifyArgs(args.slice(1)),
        timestamp: new Date().toISOString(),
      };
    } else {
      // If not an Error object, treat all args as a general error message.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        message: stringifyArgs(args),
        name: 'ConsoleLoggedError',
        stack: null,
        timestamp: new Date().toISOString(),
      };
    }
    window.parent.postMessage(errorData, '*');
    originalConsoleError.apply(console, args);
  };

  // Listen for global unhandled synchronous errors.
  window.addEventListener('error', function(event) {
    const errorDetails = event.error ? getErrorObject(event.error) : {
      message: event.message,
      name: 'GlobalError',
      stack: null,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno,
    };

    window.parent.postMessage({
      type: 'error',
      source: 'global',
      ...errorDetails,
      message: errorDetails.message || event.message,
      timestamp: new Date().toISOString(),
    }, '*');
  });

  // Listen for unhandled promise rejections (asynchronous errors).
  window.addEventListener('unhandledrejection', function(event) {
    const errorDetails = getErrorObject(event.reason);

    window.parent.postMessage({
      type: 'error',
      source: 'unhandledrejection',
      ...errorDetails,
      message: errorDetails.message || 'Unhandled Promise Rejection',
      timestamp: new Date().toISOString(),
    }, '*');
  });

})();</script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人AI模型评测工作台</title>
    <script src="https://cdn.tailwindcss.com/"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .step-card { background-color: white; border-radius: 1.5rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.05), 0 4px 6px -4px rgb(0 0 0 / 0.1); border: 1px solid #e5e7eb; transition: all 0.3s ease-in-out; }
        .btn-primary { background-color: #2563eb; color: white; font-weight: 500; padding: 0.75rem 1.5rem; border-radius: 0.75rem; transition: all 0.2s ease; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .btn-primary:hover:not(:disabled) { background-color: #1d4ed8; transform: translateY(-1px); }
        .btn-primary:disabled { background-color: #9ca3af; cursor: not-allowed; box-shadow: none; }
        .spinner { border: 2px solid #f3f4f6; border-top: 2px solid #3b82f6; border-radius: 50%; width: 16px; height: 16px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .modal-backdrop { background-color: rgba(0, 0, 0, 0.6); backdrop-filter: blur(8px); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out, padding 0.3s ease-out; padding-top: 0; padding-bottom: 0; }
        .accordion-content.expanded { max-height: 500px; padding-top: 1rem; padding-bottom: 1rem; transition: max-height 0.5s ease-in, padding 0.5s ease-in; }
        .report-scroll-container::-webkit-scrollbar { width: 6px; }
        .report-scroll-container::-webkit-scrollbar-track { background: #f1f5f9; }
        .report-scroll-container::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        .report-scroll-container::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
    <!-- GITHUB_ACTIONS_REPLACEMENT_BLOCK -->
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.fixed{position:fixed}.relative{position:relative}.inset-0{inset:0px}.z-50{z-index:50}.mb-2{margin-bottom:0.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-2{margin-left:0.5rem}.ml-4{margin-left:1rem}.mr-4{margin-right:1rem}.mt-1{margin-top:0.25rem}.mt-10{margin-top:2.5rem}.mt-2{margin-top:0.5rem}.mt-3{margin-top:0.75rem}.mt-8{margin-top:2rem}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.h-4{height:1rem}.h-40{height:10rem}.h-6{height:1.5rem}.min-h-screen{min-height:100vh}.w-10{width:2.5rem}.w-6{width:1.5rem}.w-full{width:100%}.max-w-5xl{max-width:64rem}.max-w-6xl{max-width:72rem}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-6{gap:1.5rem}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.rounded-2xl{border-radius:1rem}.rounded-md{border-radius:0.375rem}.rounded-xl{border-radius:0.75rem}.border{border-width:1px}.border-2{border-width:2px}.border-4{border-width:4px}.border-dashed{border-style:dashed}.border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-slate-300{--tw-border-opacity:1;border-color:rgb(203 213 225 / var(--tw-border-opacity, 1))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-4{padding-left:1rem;padding-right:1rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-8{padding-top:2rem;padding-bottom:2rem}.text-left{text-align:left}.text-center{text-align:center}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.tracking-tight{letter-spacing:-0.025em}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.text-slate-600{--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity:1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-slate-800{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.text-slate-900{--tw-text-opacity:1;color:rgb(15 23 42 / var(--tw-text-opacity, 1))}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.hover\:bg-gray-50:hover{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\:text-slate-800:hover{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}@media (min-width: 640px){.sm\:my-8{margin-top:2rem;margin-bottom:2rem}.sm\:ml-3{margin-left:0.75rem}.sm\:mt-0{margin-top:0px}.sm\:flex{display:flex}.sm\:w-auto{width:auto}.sm\:flex-row-reverse{flex-direction:row-reverse}.sm\:p-6{padding:1.5rem}.sm\:p-8{padding:2rem}.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\:text-4xl{font-size:2.25rem;line-height:2.5rem}.sm\:text-sm{font-size:0.875rem;line-height:1.25rem}}@media (min-width: 768px){.md\:w-auto{width:auto}.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}}@media (min-width: 1024px){.lg\:p-8{padding:2rem}}</style></head>
<body class="antialiased text-slate-800">

    <div id="app" class="min-h-screen p-4 sm:p-6 lg:p-8 flex flex-col items-center">
        
        <header class="w-full max-w-5xl mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold tracking-tight text-slate-900 text-center">个人AI模型评测工作台</h1>
            <div id="auth-status" class="text-center text-xs text-slate-500 mt-2 h-4">已连接 | 用户ID: 15380815...</div>
        </header>

        <main class="w-full max-w-5xl">
            <!-- View Container -->
            <div id="view-container">
                <div id="initial-loading-view" class="step-card p-8 text-center hidden">
                    <div class="flex items-center justify-center py-10">
                        <div class="spinner w-10 h-10 border-4"></div>
                        <p class="ml-4 text-slate-600 font-medium text-lg">正在连接云服务...</p>
                    </div>
                </div>
                <div id="list-view" class="hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-semibold">我的评测任务</h2>
                        <button id="show-create-view-btn" class="btn-primary">创建新评测</button>
                    </div>
                    <div class="step-card p-6 sm:p-8">
                        <div id="evaluations-list" class="space-y-4"><p class="text-center text-slate-500 py-8">暂无评测任务，快去创建一个吧！</p></div>
                    </div>
                </div>
                <div id="create-view" class="">
                    <div class="flex items-center mb-6">
                         <button id="back-to-list-btn" class="mr-4 text-slate-500 hover:text-slate-800 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                         </button>
                         <h2 class="text-2xl font-semibold">创建新评测任务</h2>
                    </div>
                    <div id="setup-step" class="step-card p-6 sm:p-8">
                        <div>
                            <h3 class="text-lg font-medium mb-2 text-slate-700">第一步: 上传评测集</h3>
                            <p class="text-sm text-slate-500 mb-4">上传包含“问题”和“标准答案”的文档。在MVP中，我们将使用内置的建筑学示例数据。</p>
                            <div class="relative cursor-pointer bg-white rounded-xl border-2 border-dashed border-slate-300 flex flex-col justify-center items-center w-full h-40">
                                <span class="text-sm font-medium text-slate-600">使用内置建筑学示例评测集</span>
                            </div>
                        </div>
                        <div class="mt-8">
                            <h3 class="text-lg font-medium mb-4 text-slate-700">第二步: 配置待测模型</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div><label for="model-a" class="block text-sm font-medium text-slate-600">模型 A</label><select id="model-a" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm"><option>GPT-4o</option><option>Claude 3.5 Sonnet</option></select></div>
                                <div><label for="model-b" class="block text-sm font-medium text-slate-600">模型 B</label><select id="model-b" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm"><option>GPT-4o</option><option selected="">Claude 3.5 Sonnet</option></select></div>
                            </div>
                        </div>
                        <div class="mt-10 text-center">
                            <button id="start-eval-btn" class="btn-primary text-lg w-full md:w-auto">
                                <span class="flex items-center justify-center">
                                    <span id="start-btn-text">开始评测</span>
                                    <span id="start-btn-spinner" class="spinner ml-2 hidden"></span>
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="details-modal" class="fixed inset-0 z-50 overflow-y-auto hidden">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 transition-opacity modal-backdrop" onclick="closeModal()"></div>
            <div class="inline-block bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 w-full max-w-6xl">
                <div id="modal-content-container"></div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm" onclick="closeModal()">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, updateDoc, serverTimestamp, query, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const mockReportData = {
            "questionCount": 2,
            "results": [
                {
                    "question": "什么是粗野主义建筑（Brutalism）？请列举其主要特点和代表作品。",
                    "standardAnswer": "粗野主义是20世纪中期的一种建筑风格，强调原始、裸露的混凝土（béton brut）材料美学。其主要特点包括：1. 大量使用未装饰的清水混凝土；2. 巨大、厚重的体量感和纪念碑性；3. 结构和功能构件的诚实表达；4. 粗糙、未完成的表面质感。代表作品有勒·柯布西耶的马赛公寓、保罗·鲁道夫的耶鲁大学艺术与建筑学院大楼、丹尼斯·拉斯顿的英国国家剧院。",
                    "modelA_answer": "粗野主义建筑是一种现代主义风格，喜欢用大块的混凝土，看起来很“粗糙”。它的特点就是不加修饰的混凝土墙面，造型通常很庞大、很有力量感。代表作比如柯布西耶的马赛公寓，还有很多大学校园里那种灰色的、方方正正的教学楼都是这种感觉。",
                    "modelB_answer": "粗野主义建筑（Brutalism）源自法语“béton brut”，意为“生混凝土”。它强调材料的真实性，特别是混凝土。特点是：体量巨大、几何形态大胆、表面粗糙。著名例子包括马赛公寓和伦敦的特雷利克塔（Trellick Tower）。",
                    "modelA_referee": { "scores": { "准确性": 8, "完整性": 7, "专业性": 7 }, "summary": "回答基本准确，抓住了核心特点（混凝土、体量感），但对代表作品的列举不够具体和全面。" },
                    "modelB_referee": { "scores": { "准确性": 9, "完整性": 8, "专业性": 9 }, "summary": "回答准确，并指出了风格的词源，信息更丰富。但在特点描述上可以更有条理。" }
                },
                {
                    "question": "分析弗兰克·劳埃德·赖特的“流水别墅”（Fallingwater）为何被视为有机建筑的典范。",
                    "standardAnswer": "流水别墅是有机建筑的典范，原因在于：1. 与环境的完美融合：建筑并非强加于基地之上，而是从瀑布和岩石中自然生长出来，横向的悬挑阳台模仿了岩石的层叠。2. 材料的在地性：大量使用了本地开采的石材，使其与周围环境在材质和颜色上保持统一。3. 室内外空间的流动：通过大面积的玻璃窗、转角窗和开放的平面布局，模糊了室内外界限，将自然景观引入室内。4. 形式追随自然：建筑的形态并非纯粹的几何构成，而是对基地环境（岩石、流水、树木）的一种抽象回应。",
                    "modelA_answer": "流水别墅之所以是有机建筑的典范，主要是因为它和自然环境长在了一起。房子直接建在瀑布上，用了当地的石头，所以看起来就像是从地里长出来的一样。它的阳台层层叠叠，像岩石。赖特的设计让房子内外没有明显的分界，你在屋里也能感觉到外面的自然。",
                    "modelB_answer": "流水别墅体现了赖特的“有机建筑”理念，即建筑应与环境和谐共生。首先，它直接坐落在熊跑溪的瀑布上。其次，它使用了当地的石材。最后，通过悬挑的露台，模仿了周围的岩石形态，使得建筑与自然融为一体。",
                    "modelA_referee": { "scores": { "准确性": 9, "完整性": 9, "专业性": 8 }, "summary": "回答非常生动且准确，成功地传达了“与自然生长在一起”的核心理念，覆盖了所有关键点。" },
                    "modelB_referee": { "scores": { "准确性": 8, "完整性": 7, "专业性": 7 }, "summary": "回答正确，但分析略显单薄，对“室内外空间的流动”这一点没有提及，未能完全展现其设计的精髓。" }
                },
            ]
        };

        let db, auth, userId, evaluations = [], appId;
        let unsubscribeEvaluations = null;
        let intersectionObserver = null;

        const authStatusEl = document.getElementById('auth-status');
        const viewContainer = document.getElementById('view-container');
        const initialLoadingView = document.getElementById('initial-loading-view');
        const listView = document.getElementById('list-view');
        const createView = document.getElementById('create-view');
        const evaluationsListEl = document.getElementById('evaluations-list');
        const startEvalBtn = document.getElementById('start-eval-btn');
        const showCreateViewBtn = document.getElementById('show-create-view-btn');
        const backToListBtn = document.getElementById('back-to-list-btn');
        const detailsModal = document.getElementById('details-modal');
        const modalContentContainer = document.getElementById('modal-content-container');

        function showView(viewName) {
            initialLoadingView.classList.add('hidden');
            listView.classList.add('hidden');
            createView.classList.add('hidden');
            document.getElementById(viewName).classList.remove('hidden');
        }

        showCreateViewBtn.addEventListener('click', () => showView('create-view'));
        backToListBtn.addEventListener('click', () => showView('list-view'));

        function getAvgScore(scores) {
            const scoreValues = Object.values(scores);
            if (scoreValues.length === 0) return 0;
            const sum = scoreValues.reduce((acc, val) => acc + val, 0);
            return (sum / scoreValues.length).toFixed(1);
        }

        function renderEvaluationsList() {
            if (evaluations.length === 0) {
                evaluationsListEl.innerHTML = `<p class="text-center text-slate-500 py-8">暂无评测任务，快去创建一个吧！</p>`;
                return;
            }
            evaluationsListEl.innerHTML = evaluations.map(task => {
                const statusBg = task.status === 'Completed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800';
                const buttonHtml = task.status === 'Completed'
                    ? `<button class="view-report-btn text-sm font-medium text-blue-600 hover:text-blue-800" data-id="${task.id}">查看报告</button>`
                    : `<div class="spinner w-5 h-5"></div>`;
                
                return `
                    <div class="flex items-center justify-between p-4 border rounded-lg hover:bg-slate-50">
                        <div>
                            <p class="font-semibold">${task.modelA} vs ${task.modelB}</p>
                            <p class="text-xs text-slate-500">创建于: ${task.createdAt && task.createdAt.seconds ? new Date(task.createdAt.seconds * 1000).toLocaleString() : '刚刚'}</p>
                        </div>
                        <div class="flex items-center gap-4">
                            <span class="px-2 py-1 text-xs font-medium rounded-full ${statusBg}">${task.status === 'Completed' ? '已完成' : '处理中'}</span>
                            ${buttonHtml}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function viewReport(taskId) {
            const task = evaluations.find(t => t.id === taskId);
            if (!task || !task.reportData) return;

            const leftColumnHtml = task.reportData.results.map((result, index) => {
                const modelAAvgScore = getAvgScore(result.modelA_referee.scores);
                const modelBAvgScore = getAvgScore(result.modelB_referee.scores);
                
                return `
                <div class="evaluation-block pt-8 pb-12 border-b border-slate-200 last:border-b-0" data-index="${index}">
                    <div class="border border-slate-200 rounded-lg overflow-hidden">
                        <button class="accordion-toggle w-full p-4 flex justify-between items-center bg-slate-50 hover:bg-slate-100 transition">
                            <div class="text-left"><h5 class="font-semibold text-slate-800">${task.modelA} 评测</h5><p class="text-xs text-slate-500 mt-1 italic">“${result.modelA_referee.summary}”</p></div>
                            <div class="text-right ml-4 flex-shrink-0"><div class="text-xs text-slate-500">综合得分</div><div class="font-bold text-lg text-blue-600">${modelAAvgScore}</div></div>
                        </button>
                    </div>
                    <div class="border border-slate-200 rounded-lg overflow-hidden mt-4">
                        <button class="accordion-toggle w-full p-4 flex justify-between items-center bg-slate-50 hover:bg-slate-100 transition">
                             <div class="text-left"><h5 class="font-semibold text-slate-800">${task.modelB} 评测</h5><p class="text-xs text-slate-500 mt-1 italic">“${result.modelB_referee.summary}”</p></div>
                             <div class="text-right ml-4 flex-shrink-0"><div class="text-xs text-slate-500">综合得分</div><div class="font-bold text-lg text-indigo-600">${modelBAvgScore}</div></div>
                        </button>
                    </div>
                </div>
                `
            }).join('');

            modalContentContainer.innerHTML = `
                <div class="bg-white p-6"><h3 class="text-2xl font-bold text-slate-900">报告: ${task.modelA} vs ${task.modelB}</h3><p class="text-sm text-slate-500 mt-1">共评测 ${task.reportData.questionCount} 个问题</p>
                    <div class="mt-4 grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
                        <div class="report-scroll-container max-h-[65vh] overflow-y-auto pr-4 -mr-4">${leftColumnHtml}</div>
                        <div class="hidden lg:block"><div class="sticky top-6"><div id="sticky-question-content"></div></div></div>
                    </div>
                </div>`;
            detailsModal.classList.remove('hidden');

            setTimeout(() => {
                const scrollContainer = modalContentContainer.querySelector('.report-scroll-container');
                const stickyContent = modalContentContainer.querySelector('#sticky-question-content');
                
                if (!scrollContainer || !stickyContent) { console.error("Report containers not found!"); return; }

                const evaluationBlocks = modalContentContainer.querySelectorAll('.evaluation-block');

                function updateStickyContent(index) {
                    const result = task.reportData.results[index];
                    if (result) {
                        stickyContent.innerHTML = `<h4 class="font-bold text-lg text-slate-800">${parseInt(index) + 1}. ${result.question}</h4><div class="mt-4 p-4 bg-amber-50 rounded-lg border border-amber-200"><h5 class="font-semibold text-amber-800">标准答案</h5><p class="mt-2 text-sm text-amber-900 whitespace-pre-wrap">${result.standardAnswer}</p></div>`;
                    }
                }

                if (task.reportData.results.length > 0) { updateStickyContent(0); }
                if (intersectionObserver) intersectionObserver.disconnect();
                
                intersectionObserver = new IntersectionObserver((entries) => {
                    const topEntry = entries.filter(entry => entry.isIntersecting).sort((a, b) => a.boundingClientRect.top - b.boundingClientRect.top)[0];
                    if (topEntry) { const index = topEntry.target.dataset.index; updateStickyContent(index); }
                }, { root: scrollContainer, rootMargin: "-50% 0px -50% 0px", threshold: 0 });

                evaluationBlocks.forEach(block => intersectionObserver.observe(block));
            }, 0);
        }
        
        function closeModal() {
            if (intersectionObserver) { intersectionObserver.disconnect(); intersectionObserver = null; }
            detailsModal.classList.add('hidden');
        }
        window.closeModal = closeModal;

        evaluationsListEl.addEventListener('click', (e) => {
            if (e.target.closest('.view-report-btn')) {
                const taskId = e.target.closest('.view-report-btn').dataset.id;
                viewReport(taskId);
            }
        });

        modalContentContainer.addEventListener('click', (e) => {
            const toggle = e.target.closest('.accordion-toggle');
            if (toggle) { const content = toggle.nextElementSibling; content.classList.toggle('expanded'); }
        });

        async function startEvaluation() {
            startEvalBtn.disabled = true;
            document.getElementById('start-btn-text').classList.add('hidden');
            document.getElementById('start-btn-spinner').classList.remove('hidden');

            const modelA = document.getElementById('model-a').value;
            const modelB = document.getElementById('model-b').value;

            try {
                const docRef = await addDoc(collection(db, `artifacts/${appId}/users/${userId}/evaluations`), {
                    modelA, modelB, status: 'InProgress', createdAt: serverTimestamp()
                });
                showView('list-view');
                setTimeout(async () => {
                    await updateDoc(doc(db, `artifacts/${appId}/users/${userId}/evaluations`, docRef.id), {
                        status: 'Completed', reportData: mockReportData 
                    });
                }, 5000);
            } catch (error) {
                console.error("Error creating evaluation:", error);
                authStatusEl.textContent = "创建任务失败，请检查控制台。";
            } finally {
                startEvalBtn.disabled = false;
                document.getElementById('start-btn-text').classList.remove('hidden');
                document.getElementById('start-btn-spinner').classList.add('hidden');
            }
        }
        startEvalBtn.addEventListener('click', startEvaluation);

        function setupFirestoreListener(uid) {
             if (unsubscribeEvaluations) unsubscribeEvaluations();
            const q = query(collection(db, `artifacts/${appId}/users/${uid}/evaluations`), orderBy('createdAt', 'desc'));
            unsubscribeEvaluations = onSnapshot(q, (snapshot) => {
                evaluations = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                renderEvaluationsList();
                if(evaluations.length === 0) { showView('create-view'); } 
                else { const currentView = document.querySelector('#view-container > div:not(.hidden)').id; if(currentView !== 'create-view'){ showView('list-view'); } }
            }, (error) => {
                console.error("Error fetching evaluations:", error);
                authStatusEl.textContent = "加载数据失败，请检查控制台。";
            });
        }
        
        async function main() {
            try {
                // The new logic will read credentials from the window object.
                // These can be provided by the local environment or injected by GitHub Actions.
                appId = typeof __app_id !== 'undefined' ? __app_id : window.__app_id || 'default-app-id';
                const firebaseConfigStr = typeof __firebase_config !== 'undefined' ? __firebase_config : window.__firebase_config;
                const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : window.__initial_auth_token;

                if (!firebaseConfigStr) {
                    initialLoadingView.innerHTML = `<p class="text-red-500">Firebase configuration is missing. Cannot initialize the application.</p>`;
                    return;
                }

                const firebaseConfig = JSON.parse(firebaseConfigStr);
                const app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);

                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        authStatusEl.textContent = `已连接 | 用户ID: ${userId.substring(0, 8)}...`;
                        setupFirestoreListener(userId);
                        showView('list-view');
                    } else {
                        authStatusEl.textContent = '认证失败，请刷新。';
                    }
                });

                if (initialAuthToken) await signInWithCustomToken(auth, initialAuthToken);
                else await signInAnonymously(auth);

            } catch (error) {
                console.error("Initialization Error:", error);
                initialLoadingView.innerHTML = `<p class="text-red-500">应用初始化失败，请检查控制台。 ${error.message}</p>`;
            }
        }

        main();
    </script>



</body></html>